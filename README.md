#ATM - simulation

1 ПОСТАНОВКА ЗАДАЧИ<br />
    Надо моделировать работу банкомата следующей конструкции. Банкомат состоит из следующих элементов:<br />
        • пульт управления;<br />
        • устройство идентификации банковской карты (номер карты + пин код);<br />
        • устройство приема денег;<br />
        • устройство выдачи денег.<br />
        • устройство отображения состояния банкомата и состояния выполняемой операции; <br />
    Кнопки пульта управления:<br />
        • цифровая клавиатура;<br />
        • кнопки выполнения операции<br />
        • кнопка завершения операции.<br />
        Правила работы с банкоматом.<br />
    Банкомат готовиться к работе следующим образом:<br />
        1. загружается информация относительно зарегистрированных карт и имеющих на них средств.<br />
        2. загружается заданное количество купюр для выдачи денег. 3. выводится сообщение о готовности банкомата к работе. После готовности банкомата выполняются действия:<br />
            • приложить карту к устройству идентификации;<br />
            • распознавание карты;<br />
            • запрос, ввод и подтверждение ПИН-кода;<br />
            • выбор команды;<br />
            • вносить можно купюры кратные 100 р.<br />
            • при внесении денег осуществляется суммирование;<br />
            • если для снятия запрошенного количества денег средств на карте или в банкомате недостаточно, сообщается о недостаточности средств.<br />
        Вносить можно купюры с достоинством 5000, 2000, 1000, 500 и 100 рублей в неограниченном количестве.<br />
        При снятии денег выдаются купюры с достоинством 5000, 2000, 1000, 500 и 100 рублей. Снятие денег осуществляется в режиме «Выдать крупными».<br />
        Идентификация карты, нажатия на кнопки пульта управления, внесение или снятие денег моделируется посредством клавиатурного ввода. Ввод делится на команды и их восприятие зависит от состояния банкомата последовательности выдачи. Шаблоны команд:
        Identification «номер карты» <br />
        Команда выдается при состоянии банкомата «Готов к работе». Номер карты задается четырьмя группами из 4 цифр: xxxx xxxx xxxx xxxx<br />
        PIN-code «четыре цифры»<br />
        Команда может быть выдана только после подтверждения корректности номера карты и запроса «Enter the PIN code»<br />
        Deposit money «значение купюры»<br />
        Команды могут быть выданы последовательно, тогда их значения суммируются и выдается сообщение:<br />
        The amount: «введенная сумма»<br />
        «значение купюры» может равняться 5000, 2000, 1000, 500, 100. Купюры других достоинств не принимаются. После этих команд надо ввести команду подтверждения<br />
        Deposit money to the card<br />
        После выдается сообщение:<br />
        Card balance «сумма на карте»<br />
        Если введена другая команда, то банкомат внесенные купюры возвращает.<br />
        Withdraw money «сумма»<br />
        По данной команде выдаются деньги в режиме «Выдать крупными». «сумма» должна быть кратна 100. Если денег на карте достаточно и купюр в банкомате тоже, деньги выдаются согласно сообщению:<br />
        Take the money: 5000 * «количество купюр» rub., 2000 * «количество купюр» rub., 1000 * «количество купюр» rub., 500 * «количество купюр» rub., 100 * «количество купюр» rub.<br />
        Противном случает выдается сообщение:<br />
        The amount is not a multiple of 100<br />
        Если запрошенная сумма не кратна 100.<br />
        There is not enough money on the card<br />
        Если на карте недостаточно средств.<br />
        There is not enough money in the ATM<br />
        Если в банкомате недостаточно средств или из наличных купюр нельзя<br />
        собрать запрошенную сумму. End the session<br />
        Команда завершения сеанса. Последняя не завершенная команда отменяется и банкомат переходит в состоянии готовности. Выдается сообщение Ready to work<br />
        Turn off the ATM<br />
        Команда выключения банкомата. Последняя не завершенная команда отменяется и банкомат выключается. Эта команда всегда присутствует.<br />
        Отображение текста состояния банкомата и результата операции моделируется посредством вывода на консоли.<br />
        Построить систему, которая использует объекты: <br />
            1. Объект «система».<br />
            2. Объект для чтения команд и данных. Считывает данные для подготовки и настройки банкомата. После чтения очередной порции данных для настройки или данных команды, объект выдает сигнал с текстом полученных данных. Все данные настройки и данные команды синтаксический корректны.<br />
            3. Объект пульта управления, для отработки нажатия кнопок (команд). Объект после нажатия кнопки анализирует возможность его выполнения и выдает соответствующий сигнал. Выдает сигнал если запрошенная для снятия сумма не кратна 100 или на карте нет достаточных средств.<br />
            4. Объект, моделирующий устройства идентификации банковской карты. Выдает сигнал, содержащий текст результата идентификации.<br />
            5. Объект, моделирующий устройства приема денег. После принятия очередной купюры сохраняет его. При внесении денег подряд производит суммирование. Выдает сигнал, содержащий сумму введенных денег для отображения на экран.<br />
            6. Объект, моделирующий устройства выдачи денег. Выдает сигнал, содержащий количество купюр возвращаемой суммы или информацию о невозможности получить необходимый состав купюр.<br />
            7. Объект для вывода состояния или результата операции банкомата на консоль.<br />
            Написать программу, реализующую следующий алгоритм: <br />
                1. Вызов метода объекта «система» build_tree_objects ( ).<br />
                1.1. Построение дерева иерархии объектов.<br />
                1.2. Установка связей сигналов и обработчиков между объектами. 2. Вызов метода объекта «система» exec_app ( ).<br />
                2.1. Приведение всех объектов в состояние готовности.<br />
                2.2. Цикл для обработки вводимых данных для загрузки банкомата.<br />
                2.2.1. Выдача сигнала объекту для ввода данных.<br />
                2.2.2. Отработка операции загрузки.<br />
                2.3. Цикл для обработки вводимых команд банкомата.<br />
                2.3.1. Выдача сигнала объекту для ввода команды.<br />
                2.3.2. Отработка команды.<br />
                2.4. После ввода команды «Turn off the ATM» завершить работу.<br />
            Все приведенные сигналы и соответствующие обработчики должны быть реализованы.<br />
            Все сообщения на консоль выводятся с новой строки.<br />
            В набор поддерживаемых команд добавить команду «SHOWTREE» и по этой команде вывести дерево иерархии объектов системы с отметкой о готовности и завершить работу программы.<br />
    1.1 Описание входных данных<br />
        Ввод информации о картах по последовательности первых строк «номер карты» «ПИН-код» «сумма на карте»<br />
        Ввод информации о картах завершается строкой<br />
        End card loading<br />
        Следующая строка содержит количество загружаемых купюр разного достоинства в последовательности: 5000, 2000, 1000, 500 и 100 рублевых.<br />
        «количество купюр» «количество купюр» «количество купюр» «количество купюр» «количество купюр»<br />
        Далее следуют команды. Последней командой является Turn off the ATM<br />
    Пример ввода:<br />
        1001 2022 0021 0001 5001 15000 1001 2022 0021 0002 5002 25000 1001 2022 0021 0003 5003 35000 1001 2022 0021 0004 5004 45000 1001 2022 0021 0005 5005 55000 End card loading<br />
        5000 2000 1000 500 100<br />
        End money loading<br />
        Deposit money 1000<br />
        Identification 1001 2022 0021 0004 PIN-code 5004<br />
        Deposit money 1000<br />
        Deposit money 1000<br />
        Deposit money 50<br />
        Deposit money to the card Withdraw money 10000<br />
        Deposit money 1000<br />
        Deposit money to the card<br />
        End the session<br />
        Identification 1001 2022 0021 0003 Deposit money 1000<br />
        Deposit money to the card<br />
        End the session<br />
        Deposit money 1000<br />
        Identification 1001 2022 0021 0001 PIN-code 5001<br />
        Withdraw money 8500<br />
        Deposit money 1500<br />
        Deposit money 500<br />
        Deposit money to the card<br />
        End the session<br />
        Turn off the ATM<br />
        1.2 Описание выходных данных<br />
        Шаблоны текстов, которые отображаются на консоли:<br />
        Готов к работе, отображается в начале работы системы, после завершения загрузки банкомата. Также отображается после завершения сеанса работы. Банкомат готов для обслуживания нового клиента т.е. идентификации карты. Другая команда игнорируется.<br />
        Ready to work<br />
        После идентификации карты выдается сообщение<br />
        Select the command<br />
        Сообщение о величине внесенной суммы после ввода очередной купюры. The amount: «сумма денег»<br />
        Сообщение для получения денег:<br />
        Take the money: 5000 * «количество купюр» rub., 2000 * «количество купюр»<br />
        rub., 1000 * «количество купюр» rub., 500 * «количество купюр» rub., 100 * «количество купюр» rub.<br />
        Сообщение баланса карты<br />
        Card balance «сумма на карте»<br />
        Сообщение завершения работы банкомата: Turn off the ATM<br />
        Пример вывода<br />
        Ready to work<br />
        Ready to work<br />
        Enter the PIN code<br />
        Select the command<br />
        The amount: 1000<br />
        The amount: 2000<br />
        Card balance 47000<br />
        Take the money: 5000 * 2 rub., 2000 * 0 rub., 1000 * 0 rub., 500 * 0 rub., 100 * 0<br />
        rub.<br />
        The amount: 1000<br />
        Card balance 38000<br />
        Ready to work<br />
        Enter the PIN code<br />
        Ready to work<br />
        Ready to work<br />
        Ready to work<br />
        Ready to work<br />
        Enter the PIN code<br />
        Select the command<br />
        Take the money: 5000 * 1 rub., 2000 * 1 rub., 1000 * 1 rub., 500 * 1 rub., 100 * 0<br />
        rub.<br />
        The amount: 500<br />
        Card balance 7000 Ready to work Turn off the ATM<br />
